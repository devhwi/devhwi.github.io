<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    <!-- adsense -->
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1177674828493578",
    enable_page_level_ads: true
  });
</script>

    <meta charset="utf-8">

    

    
    <title>스프링부트 OAuth2 - 3. OAuth 인증 서버 구축 | hwiVeloper</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <meta name="keywords" content="java,spring,spring-boot,spring-security,oauth2">
    
    <!-- naver-site-verification -->
    <meta name="naver-site-verification" content="4b97c9f410edba46c1d63bf0aaacc3f2fad71509">
    
        <meta name="description" content="https://spring.io/guides/tutorials/spring-boot-oauth2/ 를 참조하여 작성하였습니다.  개인적으로 서버사이드 프로그래밍을 하면서 가장 어렵기도 하고 귀찮은 부분이 인증하는 부분이라고 생각한다. 로직을 작성해 나간다기 보다는 클라이언트와 서버사이드 간의 통신을 통해 사용자를 인지하고 이를 세션 등으로 관리할 뿐 아니">
<meta name="keywords" content="java,spring,spring-boot,spring-security,oauth2">
<meta property="og:type" content="article">
<meta property="og:title" content="스프링부트 OAuth2 - 3. OAuth 인증 서버 구축">
<meta property="og:url" content="https://hwiVeloper.github.io/2019/04/21/spring-boot-oauth2-authserver/index.html">
<meta property="og:site_name" content="hwiVeloper">
<meta property="og:description" content="https://spring.io/guides/tutorials/spring-boot-oauth2/ 를 참조하여 작성하였습니다.  개인적으로 서버사이드 프로그래밍을 하면서 가장 어렵기도 하고 귀찮은 부분이 인증하는 부분이라고 생각한다. 로직을 작성해 나간다기 보다는 클라이언트와 서버사이드 간의 통신을 통해 사용자를 인지하고 이를 세션 등으로 관리할 뿐 아니">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://i.imgur.com/WTlXjeF.jpg">
<meta property="og:updated_time" content="2019-11-18T08:33:08.737Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="스프링부트 OAuth2 - 3. OAuth 인증 서버 구축">
<meta name="twitter:description" content="https://spring.io/guides/tutorials/spring-boot-oauth2/ 를 참조하여 작성하였습니다.  개인적으로 서버사이드 프로그래밍을 하면서 가장 어렵기도 하고 귀찮은 부분이 인증하는 부분이라고 생각한다. 로직을 작성해 나간다기 보다는 클라이언트와 서버사이드 간의 통신을 통해 사용자를 인지하고 이를 세션 등으로 관리할 뿐 아니">
<meta name="twitter:image" content="https://i.imgur.com/WTlXjeF.jpg">
    
    

    

    
        <link rel="icon" href="/favicon-github.ico">
    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/titillium-web/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/3.3.1/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
        <script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-99293532-1', 'auto');
ga('send', 'pageview');

</script>
    
    



    <!-- OneSignal -->
    <link rel="manifest" href="/manifest.json">
    <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async></script>
    <script>
        var OneSignal = window.OneSignal || [];
        OneSignal.push(function() {
            OneSignal.init({
            appId: "76ed5201-e024-4abf-a603-048783f1a361",
            });
        });
    </script>
</head>
</html>
<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo-title">hwiVeloper</a>
                    </h1>
                    
                        <h2 class="subtitle-wrap">
                            <p class="subtitle">devlog</p>
                        </h2>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item">
                                    <a class="main-nav-list-link" href="/">Home</a>
                                </li>
                            
                                <li class="main-nav-list-item">
                                    <a class="main-nav-list-link" href="/archives/index.html">Archive</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search">
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something...">
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/java/">java</a>
    </h1>
</div>

                        <div class="main-body-content">
                            <article id="post-spring-boot-oauth2-authserver" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        스프링부트 OAuth2 - 3. OAuth 인증 서버 구축
        </h1>
    

            </header>
        
        
            <div class="article-meta">
                
    <div class="article-date">
        <a href="/2019/04/21/spring-boot-oauth2-authserver/" class="article-date">
            <time datetime="2019-04-21T09:12:00.000Z" itemprop="datePublished">2019-04-21</time>
        </a>
    </div>

		

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/java/">java</a>, <a class="tag-link" href="/tags/oauth2/">oauth2</a>, <a class="tag-link" href="/tags/spring/">spring</a>, <a class="tag-link" href="/tags/spring-boot/">spring-boot</a>, <a class="tag-link" href="/tags/spring-security/">spring-security</a>
    </div>

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <blockquote>
<p><a href="https://spring.io/guides/tutorials/spring-boot-oauth2/" rel="external nofollow noopener noreferrer" target="_blank">https://spring.io/guides/tutorials/spring-boot-oauth2/</a> 를 참조하여 작성하였습니다.</p>
</blockquote>
<p>개인적으로 서버사이드 프로그래밍을 하면서 가장 어렵기도 하고 귀찮은 부분이 <code>인증</code>하는 부분이라고 생각한다. 로직을 작성해 나간다기 보다는 클라이언트와 서버사이드 간의 통신을 통해 사용자를 인지하고 이를 세션 등으로 관리할 뿐 아니라, 권한 문제까지 연결되는 부분이기 때문이다. 고로 가장 민감한 부분이라고 본다.</p>
<p><a href="https://spring.io/guides/tutorials/spring-boot-oauth2/" rel="external nofollow noopener noreferrer" target="_blank">스프링 공식 홈페이지의 OAuth2 가이드</a>를 보면 다른 가이드와는 다르게 다소 스크롤의 압박이 느껴진다. 따라서 크게 세 부분으로 나누어 포스팅이 진행될 예정이다.</p>
<ol>
<li><a href="https://hwiVeloper.github.io/2019/04/05/spring-boot-oauth2-facebook/">Facebook으로 로그인</a></li>
<li><a href="https://hwiVeloper.github.io/2019/04/08/spring-boot-oauth2-github/">Github로 로그인</a></li>
<li>OAuth2 인증 서버 구축</li>
</ol>
<h1 id="인증-서버-구축"><a href="#인증-서버-구축" class="headerlink" title="인증 서버 구축"></a>인증 서버 구축</h1><p>이번 포스팅에서는 앞서 만들었던 어플리케이션을 OAuth2 인증 서버로 만든다. 앞서 구현했던 <code>facebook</code>과 <code>github</code>를 통한 인증을 사용하지만, 별도의 자체 액세스 토큰을 만들어서 인증을 수행한다. 이 토큰을 사용하여 백엔드 자원을 보호하고 타 어플리케이션과 SSO를 수행한다.</p>
<h2 id="인증-설정-다듬기"><a href="#인증-설정-다듬기" class="headerlink" title="인증 설정 다듬기"></a>인증 설정 다듬기</h2><p>인증 서버를 본격적으로 구축하기 전에 <code>github</code>와 <code>facebook</code>에 관련된 설정을 먼저 다듬어야 할 필요가 있다. <code>ssoFilter()</code>를 수정해보자.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Application.java</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> Filter <span class="title">ssoFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  CompositeFilter filter = <span class="keyword">new</span> CompositeFilter();</span><br><span class="line">  List&lt;Filter&gt; filters = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">  </span><br><span class="line">  filters.add(ssoFilter(facebook(), <span class="string">"/login/facebook"</span>));</span><br><span class="line">	filters.add(ssoFilter(github(), <span class="string">"/login/github"</span>));</span><br><span class="line">  </span><br><span class="line">  filter.setFilters(filters);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> filter;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>ssoFilter()</code>를 <code>overloading</code>한 새로운 메서드를 작성해야 한다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> Filter <span class="title">ssoFilter</span><span class="params">(ClientResources client, String path)</span> </span>&#123;</span><br><span class="line">  OAuth2ClientAuthenticationProcessingFilter filter = <span class="keyword">new</span> OAuth2ClientAuthenticationProcessingFilter(path);</span><br><span class="line">  OAuth2RestTemplate template = <span class="keyword">new</span> OAuth2RestTemplate(client.getClient(), oauth2ClientContext);</span><br><span class="line">  filter.setRestTemplate(template);</span><br><span class="line">  UserInfoTokenServices tokenServices = <span class="keyword">new</span> UserInfoTokenServices(client.getResource().getUserInfoUri(), client.getClient().getClientId());</span><br><span class="line">  tokenServices.setRestTemplate(template);</span><br><span class="line">  filter.setTokenServices(tokenServices);</span><br><span class="line">  <span class="keyword">return</span> filter;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>이전에 <code>ssoFilter()</code>에 작성한 내용과 유사하지만 약간의 공통화 과정을 거친 것이라 보면 되겠다. <code>ClientResources</code>라는 오브젝트는 존재하지 않는다. 따라서 별도의 wrapper 객체를 생성한다. 이는 별도의 <code>@Beaㅜ</code>로 선언된 <code>OAuth2ProtectedResourceDetails</code>와 <code>ResourceServerProperties</code>를 통합하는 역할이라 보면 되겠다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClientResources</span> </span>&#123;</span><br><span class="line">  <span class="meta">@NestedConfigurationProperty</span></span><br><span class="line">  <span class="keyword">private</span> AuthorizationCodeResourceDetails client = <span class="keyword">new</span> AuthorizationCodeResourceDetails();</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@NestedConfigurationProperty</span></span><br><span class="line">  <span class="keyword">private</span> ResourceServerProperties resource = <span class="keyword">new</span> ResourceServerProperties();</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> AuthorizationCodeResourceDetails <span class="title">getClient</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> client;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> ResourceServerProperties <span class="title">getResource</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> resource;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>wrapper 클래스는 <code>@NestedConfigurationProperty</code>를 사용하여 어노테이션 프로세서가 하나의 값을 표현하지 않고 중첩 형식을 나타내기 때문에 메타데이터에 접근하여 크롤링하도록 지시한다.</p>
</blockquote>
<p>위 wrapper 클래스 작성으로 spring 설정을 이전처럼 사용할 수 있을 뿐만 아니라 공통화를 지향한 결과이다. 마지막으로 각각 provider의 설정값을 가져오도록 <code>@Bean</code>을 생성한다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(<span class="string">"github"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ClientResources <span class="title">github</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> ClientResources();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(<span class="string">"facebook"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ClientResources <span class="title">facebook</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> ClientResources();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="인증-서버-가용-상태로-만들기"><a href="#인증-서버-가용-상태로-만들기" class="headerlink" title="인증 서버 가용 상태로 만들기"></a>인증 서버 가용 상태로 만들기</h2><p>특별히 어마어마한 타이핑이 필요하지 않고 어노테이션 하나로 끝낼 수 있다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableOAuth</span>2Client</span><br><span class="line"><span class="meta">@EnableAuthorizationServer</span> <span class="comment">// 추가</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootOauth2Application</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span></span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>새로운 어노테이션을 추가하게 되면 필요한 엔드포인트와 security를 어플리케이션에 로드할 것이다. 그리고 몇가지 OAuth2 클라이언트에 관한 정보를 설정해야 한다.</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># application.yml</span></span><br><span class="line"><span class="attr">security:</span></span><br><span class="line">  <span class="attr">oauth2:</span></span><br><span class="line">    <span class="attr">client:</span></span><br><span class="line">      <span class="attr">client-id:</span> <span class="string">acme</span></span><br><span class="line">      <span class="attr">client-secret:</span> <span class="string">acmesecret</span></span><br><span class="line">      <span class="attr">scope:</span> <span class="string">read,</span> <span class="string">write</span></span><br><span class="line">      <span class="attr">auto-approve-scopes:</span> <span class="string">'.*'</span></span><br></pre></td></tr></table></figure>
<p>위 작업은 <code>facebook.client*</code>, <code>github.client*</code>에 대한 작업과 동일한 것이다. <code>auto-approve-scopes</code>는 위 설정처럼 정규표현식으로 작성이 가능하다. 이번 포스팅에서 작성하는 샘플에서는 특별히 제한을 두지 않기 때문에 모든 것을 허용하지만, 실제 프로젝트나 운영 단계에서는 세부적으로 설정할 필요가 있다.</p>
<p>인증 서버 구축을 마무리하기 위해서 UI에 관련된 security 설정이 필요하다. 샘플 어플리케이션이기 때문에 많은 설정이 필요하진 않지만, oauth와 관련된 endpoint 등의 필요한 부분에 설정해 줄 필요가 있다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">  http.antMatcher(<span class="string">"/**"</span>) <span class="comment">// ①</span></span><br><span class="line">    .authorizeRequests()</span><br><span class="line">    .antMatchers(<span class="string">"/"</span>, <span class="string">"/login**"</span>, <span class="string">"/webjars/**"</span>, <span class="string">"/error**"</span>).permitAll() <span class="comment">// ②</span></span><br><span class="line">    .anyRequest().authenticated() <span class="comment">// ③</span></span><br><span class="line">    .and().exceptionHandling()</span><br><span class="line">      .authenticationEntryPoint(<span class="keyword">new</span> LoginUrlAuthenticationEntryPoint(<span class="string">"/"</span>)) <span class="comment">// ④</span></span><br><span class="line">    .and().logout().logoutSuccessUrl(<span class="string">"/"</span>).permitAll()</span><br><span class="line">    .and().csrf().csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse())</span><br><span class="line">    .and().addFilterBefore(ssoFilter(), BasicAuthenticationFilter<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>① : 기본적으로 모든 요청은 보호된다.</li>
<li>② : 로그인 엔드포인트는 제외된다.</li>
<li>③ : 그 외의 모든 요청은 인증이 필요하다.</li>
<li>④ : 인증되지 않은 사용자는 <code>/</code>로 redirect 된다.</li>
</ul>
<h2 id="Access-Token-얻기"><a href="#Access-Token-얻기" class="headerlink" title="Access Token 얻기"></a>Access Token 얻기</h2><p>이제 우리가 구축한 인증 서버를 통해 Access Token을 얻을 수 있다. 가장 쉬운 방법은 “acme” 클라이언트를 통해서이다. <code>curl</code> 명령어를 사용하여 토큰을 얻어보자</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ curl acme:acmesecret@localhost:8080/oauth/token -d grant_type=client_credentials</span><br><span class="line"><span class="comment">#   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span></span><br><span class="line"><span class="comment">#                                  Dload  Upload   Total   Spent    Left  Speed</span></span><br><span class="line"><span class="comment"># 100   146    0   117  100    29   7312   1812 --:--:-- --:--:-- --:--:--  9125&#123;"access_token":"c42ba0f2-543e-4275-9eb2-efb1f48fa680","token_type":"bearer","expires_in":43186,"scope":"read write"&#125;</span></span><br></pre></td></tr></table></figure>
<p>단순히 토큰을 얻는 것만으로는 뭔가 완벽한 어플리케이션을 위해서는 부족해 보인다. 특정 유저에게 생성하도록 만들어야 한다. 스프링 어플리케이션을 구동했을 때 아마 <code>Using generated security password: ...</code> 처럼 자동 생성되는 기본 암호를 볼 수 있을 것이다. 이를 이용하여 다시 토큰을 얻어보자.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ curl acme:acmesecret@localhost:8080/oauth/token -d grant_type=password -d username=user -d password=...</span><br><span class="line"><span class="comment">#   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span></span><br><span class="line"><span class="comment">#                                  Dload  Upload   Total   Spent    Left  Speed</span></span><br><span class="line"><span class="comment"># 100   251    0   172  100    79   1577    724 --:--:-- --:--:-- --:--:--  2302&#123;"access_token":"629d6260-5eba-43e7-9072-7608b6b46254","token_type":"bearer","refresh_token":"bd7e65ce-6663-40b1-8307-04787221197f","expires_in":43199,"scope":"read write"&#125;</span></span><br></pre></td></tr></table></figure>
<p>명령어의 “…” 부분에는 앞서 말한 자동생성되는 암호를 기입해주어서 <code>curl</code>명령을 날리면 역시 토큰을 받을 수 있다. 현재 테스트한 방법 외에 일반적인 소셜 로그인에서는 “인증 코드”를 받아야 한다. 즉, 이를 통해 redirect, cookie 등을 핸들링하거나 외부 provider로부터 UI를 렌더링할 수 있어야 한다.</p>
<h2 id="클라이언트-어플리케이션-생성하기"><a href="#클라이언트-어플리케이션-생성하기" class="headerlink" title="클라이언트 어플리케이션 생성하기"></a>클라이언트 어플리케이션 생성하기</h2><p>우리가 구축한 인증 서버에 필요한 client를 생성해보자. <code>ClientApplication.java</code>를 생성할 것이다. 단, 기존 <code>*Application.java</code>와 같은 패키지(또는 서브 패키지)에 위치해서는 안된다. 스프링은 기존의 Application을 구동하면서 <code>ClientApplication</code>을 하나의 설정으로 구동시킬 것이다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ClientApplication.java</span></span><br><span class="line"><span class="comment">// src/test/java/ 에 위치해있다.</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableOAuth</span>2Sso</span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClientApplication</span> </span>&#123;</span><br><span class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"/"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">home</span><span class="params">(Principal user)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"Hello, "</span> + user.getName();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">new</span> SpringApplicationBuilder(ClientApplication<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line">			.properties("spring.config.name=client").run(args);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>단순하게 사용자의 이름을 출력하는 페이지로 구성이 되어있다. <code>spring.config.name=client</code>라는 설정파일을 불러와서 실행될 것이다. <code>client.yml</code>파일을 생성해보자.</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># client.yml</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">9999</span></span><br><span class="line">  <span class="attr">servlet:</span></span><br><span class="line">    <span class="attr">context-path:</span> <span class="string">/client</span></span><br><span class="line"><span class="attr">security:</span></span><br><span class="line">  <span class="attr">oauth2:</span></span><br><span class="line">    <span class="attr">client:</span></span><br><span class="line">      <span class="attr">client-id:</span> <span class="string">acme</span></span><br><span class="line">      <span class="attr">client-secret:</span> <span class="string">acmesecret</span></span><br><span class="line">      <span class="attr">access-token-uri:</span> <span class="string">http://localhost:8080/oauth/token</span></span><br><span class="line">      <span class="attr">user-authorization-uri:</span> <span class="string">http://localhost:8080/oauth/authorize</span></span><br><span class="line">    <span class="attr">resource:</span></span><br><span class="line">      <span class="attr">user-info-uri:</span> <span class="string">http://localhost:8080/me</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">main:</span></span><br><span class="line">    <span class="attr">allow-bean-definition-overriding:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>메인이 되는 어플리케이션 설정과 비슷하지만, facebook이나 github 대신 “acme” 클라이언트로 통하도록 설정이 되어있다. 어플리케이션은 9999 포트에서 띄워져서 기존 포트와의 충돌을 방지한다. <code>server.context-path</code>의 값을 별도로 세팅하였다. 따라서 <a href="http://localhost:9999/client" rel="external nofollow noopener noreferrer" target="_blank">http://localhost:9999/client</a> 를 통해 확인이 가능하다. 어플리케이션을 시작하면 아래 그림처럼 두개의 포트가 띄워질 것이다.(사실 이 부분을 늦게 확인하는 바람에 어떻게 9999포트가 열린 상태인지 확인을 못했다.)</p>
<p><img src="https://i.imgur.com/5tdTOEf.png" alt="Client쪽 port가 올라온 모습"></p>
<h2 id="사용자-정보-엔드포인트-보호하기"><a href="#사용자-정보-엔드포인트-보호하기" class="headerlink" title="사용자 정보 엔드포인트 보호하기"></a>사용자 정보 엔드포인트 보호하기</h2><p>Single sign on을 위한 새로운 인증 서버를 사용하기 위해 facebook과 github를 사용하는데, 사용자가 인증할 때 생성된 쿠키로 보호된다. 로컬에 부여 된 액세스 토큰과 함께 보안을 유지하기 위해 기존의 엔드포인트를 재사용하고 새 경로로 alias를 지정할 수 있다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(&#123; <span class="string">"/user"</span>, <span class="string">"/me"</span> &#125;)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, String&gt; <span class="title">user</span><span class="params">(Principal principal)</span> </span>&#123;</span><br><span class="line">  Map&lt;String, String&gt; map = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</span><br><span class="line">  map.put(<span class="string">"name"</span>, principal.getName());</span><br><span class="line">  <span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>기존 메서드에서 <code>Principal</code>을 <code>Map</code>으로 바꾼 이유는 브라우저에서 민감한 정보를 노출시키지 않기 위해 숨기는 것이다. 추가적으로 필요한 부분이 있다면 Map에 추가적으로 put해줌으로써 브라우저에 노출시키는 것이 가능하다.</p>
</blockquote>
<p>“/me” 경로는 어플리케이션이 리소스 서버로 선언됨으로서 access token으로 보호된다. 다음과 같이 새로운 설정 클래스를 만들어보자</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Application.java</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableResourceServer</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ResourceServerConfiguration</span> <span class="keyword">extends</span> <span class="title">ResourceServerConfigurerAdapter</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		http.antMatcher(<span class="string">"/me"</span>)</span><br><span class="line">			.authorizeRequests().anyRequest().authenticated();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><del><code>@Order</code> 어노테이션을 추가한다.</del> <code>SecurityProperties</code>의 <code>ACCESS_OVERRIDE_ORDER</code>가 <code>deprecated</code> 상태이므로 넘어간다. 어플리케이션이 security 수행 시, 엔드포인트에 대한 우선순위가 있지만 여기서는 정하지 않겠다.</p>
<h3 id="테스트"><a href="#테스트" class="headerlink" title="테스트"></a>테스트</h3><p><a href="http://localhost:9999/client/" rel="external nofollow noopener noreferrer" target="_blank">http://localhost:9999/client/</a> 로 접속하게 되면 <code>redirect</code>가 되면서 <code>localhost:8080</code>으로 이동할 것이다. facebook과 github 로그인 중 하나를 선택하면 인증이 시작되고 완료되면 다시 <a href="http://localhost:9999/client/" rel="external nofollow noopener noreferrer" target="_blank">http://localhost:9999/client/</a> 로 이동될 것이다. 그리고 인증된 사용자의 이름이 출력되면서 테스트를 마무리할 수 있다.</p>
<p><img src="https://i.imgur.com/oLVhuab.png" alt="Client Application 테스트 결과"></p>
<h2 id="마무리"><a href="#마무리" class="headerlink" title="마무리"></a>마무리</h2><p>길고 긴 <code>OAuth2</code>인증부터 서버 구축까지 마무리를 해보았다. Spring Security는 이러한 기능도 하고 있지만 더 많은 기능을 담고 있는 강력한 모듈이기 때문에 추가적인 학습이 필요하다. 사실 이 포스팅 뒤에 에러 처리 등의 자잘한 과정이 남아있지만 이번 포스팅에서는 다루지 않겠다. 아마 여기까지 따라오기만 해도 꽤나 지칠 수 있기 때문이다. 이정도면 OAuth2의 기능을 살펴보았다고 해도 좋다. 참고 URL은 포스팅 처음에 링크를 걸어두었으니 가서 참고하면 좋을 것이다.(영어긴 하지만..)</p>
<h2 id="소스코드"><a href="#소스코드" class="headerlink" title="소스코드"></a>소스코드</h2><p><a href="https://github.com/hwiVeloper/SpringBootStudy/tree/495193fb5ca875be9b7833765ce6379971bc0ba0/spring-boot-oauth2" rel="external nofollow noopener noreferrer" target="_blank">https://github.com/hwiVeloper/SpringBootStudy/tree/495193fb5ca875be9b7833765ce6379971bc0ba0/spring-boot-oauth2</a></p>

        </div>
        <footer class="article-footer">
            



    <a data-url="https://hwiVeloper.github.io/2019/04/21/spring-boot-oauth2-authserver/" data-id="ck346a2r7001r98hh2zp7dowa" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
</article>

    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>



                        </div>
                    </section>
                    <!-- busuanzi visitor counter script -->
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>follow:</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/hwiVeloper" target="_blank" rel="external nofollow noopener noreferrer">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="facebook" href="https://www.facebook.com/jjonghwi" target="_blank" rel="external nofollow noopener noreferrer">
                        <i class="icon fa fa-facebook"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="instagram" href="https://instagram.com/hwi_stagram" target="_blank" rel="external nofollow noopener noreferrer">
                        <i class="icon fa fa-instagram"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2019/10/28/2nd-job-flipping/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">newer</strong>
        <p class="article-nav-title">
        
            두 번째 이직
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2019/04/08/spring-boot-oauth2-github/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">older</strong>
        <p class="article-nav-title">스프링부트 OAuth2 - 2. Github 인증</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Review/">Review</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Scribble/">Scribble</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Software/">Software</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/php/">php</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/raspberrypi/">raspberrypi</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/swift/">swift</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tools/">tools</a><span class="category-list-count">3</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap">
        <h3 class="widget-title">recents</h3>
        <div class="widget">
            <ul id="recent-post" class>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2019/10/28/2nd-job-flipping/" class="thumbnail">
    
    
        <span style="background-image:url(https://i.imgur.com/E08CWBZ.png)" alt="두 번째 이직" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Scribble/">Scribble</a></p>
                            <p class="item-title"><a href="/2019/10/28/2nd-job-flipping/" class="title">두 번째 이직</a></p>
                            <p class="item-date"><time datetime="2019-10-28T05:42:29.000Z" itemprop="datePublished">2019-10-28</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2019/04/21/spring-boot-oauth2-authserver/" class="thumbnail">
    
    
        <span style="background-image:url(https://i.imgur.com/WTlXjeF.jpg)" alt="스프링부트 OAuth2 - 3. OAuth 인증 서버 구축" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/java/">java</a></p>
                            <p class="item-title"><a href="/2019/04/21/spring-boot-oauth2-authserver/" class="title">스프링부트 OAuth2 - 3. OAuth 인증 서버 구축</a></p>
                            <p class="item-date"><time datetime="2019-04-21T09:12:00.000Z" itemprop="datePublished">2019-04-21</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2019/04/08/spring-boot-oauth2-github/" class="thumbnail">
    
    
        <span style="background-image:url(https://i.imgur.com/WTlXjeF.jpg)" alt="스프링부트 OAuth2 - 2. Github 인증" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/java/">java</a></p>
                            <p class="item-title"><a href="/2019/04/08/spring-boot-oauth2-github/" class="title">스프링부트 OAuth2 - 2. Github 인증</a></p>
                            <p class="item-date"><time datetime="2019-04-08T07:30:00.000Z" itemprop="datePublished">2019-04-08</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2019/04/05/spring-boot-oauth2-facebook/" class="thumbnail">
    
    
        <span style="background-image:url(https://i.imgur.com/WTlXjeF.jpg)" alt="스프링부트 OAuth2 - 1. Facebook 인증" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/java/">java</a></p>
                            <p class="item-title"><a href="/2019/04/05/spring-boot-oauth2-facebook/" class="title">스프링부트 OAuth2 - 1. Facebook 인증</a></p>
                            <p class="item-date"><time datetime="2019-04-05T07:30:53.000Z" itemprop="datePublished">2019-04-05</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2019/01/16/spring-boot-scheduler/" class="thumbnail">
    
    
        <span style="background-image:url(https://i.imgur.com/WTlXjeF.jpg)" alt="스프링부트 스케쥴러" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/java/">java</a></p>
                            <p class="item-title"><a href="/2019/01/16/spring-boot-scheduler/" class="title">스프링부트 스케쥴러</a></p>
                            <p class="item-date"><time datetime="2019-01-16T14:39:53.000Z" itemprop="datePublished">2019-01-16</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a><span class="archive-list-count">17</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-float">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/2018/" style="font-size: 10px;">2018</a> <a href="/tags/apm/" style="font-size: 12.86px;">apm</a> <a href="/tags/atom/" style="font-size: 12.86px;">atom</a> <a href="/tags/automount/" style="font-size: 10px;">automount</a> <a href="/tags/book/" style="font-size: 10px;">book</a> <a href="/tags/codeigniter/" style="font-size: 10px;">codeigniter</a> <a href="/tags/composer/" style="font-size: 10px;">composer</a> <a href="/tags/database/" style="font-size: 10px;">database</a> <a href="/tags/datasource/" style="font-size: 10px;">datasource</a> <a href="/tags/date/" style="font-size: 10px;">date</a> <a href="/tags/db-connection/" style="font-size: 10px;">db-connection</a> <a href="/tags/developer/" style="font-size: 10px;">developer</a> <a href="/tags/devtools/" style="font-size: 12.86px;">devtools</a> <a href="/tags/facebook/" style="font-size: 10px;">facebook</a> <a href="/tags/ftp/" style="font-size: 10px;">ftp</a> <a href="/tags/github/" style="font-size: 10px;">github</a> <a href="/tags/iOS/" style="font-size: 20px;">iOS</a> <a href="/tags/ide/" style="font-size: 12.86px;">ide</a> <a href="/tags/installer/" style="font-size: 10px;">installer</a> <a href="/tags/java/" style="font-size: 17.14px;">java</a> <a href="/tags/javascript/" style="font-size: 10px;">javascript</a> <a href="/tags/laravel/" style="font-size: 11.43px;">laravel</a> <a href="/tags/log/" style="font-size: 10px;">log</a> <a href="/tags/logrotate/" style="font-size: 10px;">logrotate</a> <a href="/tags/mariadb/" style="font-size: 10px;">mariadb</a> <a href="/tags/memoir/" style="font-size: 10px;">memoir</a> <a href="/tags/messaging/" style="font-size: 10px;">messaging</a> <a href="/tags/multi-cursor/" style="font-size: 10px;">multi-cursor</a> <a href="/tags/mvc/" style="font-size: 10px;">mvc</a> <a href="/tags/mysql/" style="font-size: 12.86px;">mysql</a> <a href="/tags/nginx/" style="font-size: 11.43px;">nginx</a> <a href="/tags/oauth2/" style="font-size: 12.86px;">oauth2</a> <a href="/tags/obj-c/" style="font-size: 20px;">obj-c</a> <a href="/tags/objective-c/" style="font-size: 20px;">objective-c</a> <a href="/tags/order-by/" style="font-size: 10px;">order by</a> <a href="/tags/php/" style="font-size: 14.29px;">php</a> <a href="/tags/php7/" style="font-size: 10px;">php7</a> <a href="/tags/php7-fpm/" style="font-size: 10px;">php7-fpm</a> <a href="/tags/pigments/" style="font-size: 10px;">pigments</a> <a href="/tags/proftpd/" style="font-size: 10px;">proftpd</a> <a href="/tags/raspberrypi/" style="font-size: 18.57px;">raspberrypi</a> <a href="/tags/raspbian/" style="font-size: 18.57px;">raspbian</a> <a href="/tags/remote-ftp/" style="font-size: 10px;">remote-ftp</a> <a href="/tags/review/" style="font-size: 10px;">review</a> <a href="/tags/scheduler/" style="font-size: 10px;">scheduler</a> <a href="/tags/spring/" style="font-size: 15.71px;">spring</a> <a href="/tags/spring-boot/" style="font-size: 15.71px;">spring-boot</a> <a href="/tags/spring-security/" style="font-size: 12.86px;">spring-security</a> <a href="/tags/ssh/" style="font-size: 10px;">ssh</a> <a href="/tags/stomp/" style="font-size: 10px;">stomp</a> <a href="/tags/stringbuilder/" style="font-size: 10px;">stringbuilder</a> <a href="/tags/stringjoiner/" style="font-size: 10px;">stringjoiner</a> <a href="/tags/swift/" style="font-size: 20px;">swift</a> <a href="/tags/torrent/" style="font-size: 10px;">torrent</a> <a href="/tags/transmission/" style="font-size: 10px;">transmission</a> <a href="/tags/ubuntu/" style="font-size: 18.57px;">ubuntu</a> <a href="/tags/websocket/" style="font-size: 10px;">websocket</a> <a href="/tags/개발자/" style="font-size: 10px;">개발자</a> <a href="/tags/이직/" style="font-size: 10px;">이직</a> <a href="/tags/한빛미디어/" style="font-size: 10px;">한빛미디어</a>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">links</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


            
        
        <!-- busuanzi counter display -->
        <div class="busuanzi-counter">
            <span id="busuanzi_container_site_pv">
                Total : <span id="busuanzi_value_site_pv"></span>
            </span>
            <span id="busuanzi_container_site_uv">
                Visitors : <span id="busuanzi_value_site_uv"></span>
            </span>
        </div>
    </div>
</aside>

                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
		<!--
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
		-->
                <p>&copy; 2019 hwiVeloper</p>
                <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a></p>
            </div>
            <div class="footer-plugins">
              
    


            </div>
        </div>
    </div>
</footer>

        
    
    <script>
    var disqus_shortname = 'hwiVeloper';
    
    
    var disqus_url = 'https://hwiVeloper.github.io/2019/04/21/spring-boot-oauth2-authserver/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>




    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>

